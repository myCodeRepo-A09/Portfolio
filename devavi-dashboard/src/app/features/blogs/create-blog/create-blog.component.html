<div class="create-blog-container">
    <form [formGroup]="blogForm" (ngSubmit)="submitBlog()">
        <h2>{{ isEditMode ? 'Edit Blog' : 'Create Blog' }}</h2>

        <div class="form-group">
            <label for="title">Title</label>
            <input id="title" formControlName="title" placeholder="Enter blog title" />
        </div>

        <div class="form-group">
            <label for="excerpt">Excerpt</label>
            <input id="excerpt" formControlName="excerpt" placeholder="Short description of your blog" />
        </div>

        <div class="form-group">
            <label for="slug">Slug</label>
            <input id="slug" formControlName="slug" placeholder="URL-friendly identifier" />
        </div>

        <div class="form-group">
            <label for="tags">Tags</label>
            <input id="tags" formControlName="tags" placeholder="Comma separated tags (e.g., angular, web, design)" />
        </div>

        <div class="form-group">
            <label for="readTime">Read Time (minutes)</label>
            <input id="readTime" formControlName="readTime" placeholder="Estimated reading time" type="number" />
        </div>

        <!-- Thumbnail Upload -->
        <div class="form-group">
            <label for="thumbnailUpload" class="file-upload-label">
                <i class="fas fa-image"></i> Choose Thumbnail Image
            </label>
            <input type="file" id="thumbnailUpload" accept="image/*" (change)="onThumbnailSelected($event)" />
        </div>

        <div class="existing-attachments" *ngIf="(existingThumbnail?.length ?? 0) > 0">
            <h3>Selected thumbnail</h3>
            <div *ngFor="let file of existingThumbnail">
                <span *ngIf="file.originalName">{{ file.originalName }}</span>
                <span *ngIf="!file.originalName && file.name">{{ file.name }}</span>
                <span *ngIf=" !file.originalName &&  !file.name">{{file |json}}</span>
                <button type="button" (click)="removeExistingThumbnail(file)" aria-label="Remove file">
                    Remove
                </button>
            </div>
        </div>

        <!-- File Upload -->
        <div class="form-group">
            <label for="fileUpload" class="file-upload-label">
                <i class="fas fa-paperclip"></i> Attach Files (images, videos, PDFs)
            </label>
            <input type="file" id="fileUpload" (change)="onFileSelected($event)" multiple />
        </div>
        <!-- 
        <div class="existing-attachments" *ngIf="(selectedFiles?.length ?? 0) > 0">
            <h3>New Attachements</h3>
            <div *ngFor="let file of selectedFiles">
                <span *ngIf="file.name">{{ file.name }}</span>
                <span *ngIf="!file.name">{{file}}</span>
                <button type="button" (click)="removeSelectedFiles(file)" aria-label="Remove file">
                    Remove
                </button>
            </div>
        </div> -->

        <div class="existing-attachments" *ngIf="isEditMode && (allAttachments?.length ?? 0) > 0">
            <h3>Attached files</h3>
            <div *ngFor="let file of allAttachments">
                <span *ngIf="file.originalName">{{ file.originalName }}</span>
                <span *ngIf="!file.originalName && file.name">{{ file.name }}</span>
                <span *ngIf=" !file.originalName &&  !file.name">{{file |json}}</span>
                <button type="button" (click)="removeExistingFile(file)" aria-label="Remove file">
                    Remove
                </button>
            </div>
        </div>

        <div class="form-group">
            <label>Content</label>
            <div class="editor-container">
                <quill-editor formControlName="content" [modules]="modules"
                    placeholder="Write your amazing content here..."></quill-editor>
            </div>
        </div>

        <div class="form-group">
            <label for="status">Status</label>
            <select id="status" formControlName="status">
                <option value="draft">Draft</option>
                <option value="published">Published</option>
            </select>
        </div>

        <button type="submit" [disabled]="blogForm.invalid">
            <i class="fas fa-paper-plane"></i> {{ isEditMode ? 'Update Blog' : 'Publish Blog' }}
        </button>
    </form>
</div>