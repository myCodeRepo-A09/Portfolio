<header class="header" [class.scrolled]="isScrolled" role="banner">
    <div class="container">
        <!-- Logo -->
        <a routerLink="/" class="logo" (click)="closeMenu()" aria-label="DevAvi home">
            <span class="logo-dev">Dev</span><span class="logo-avi">Avi</span><span class="logo-com">.com</span>
        </a>

        <!-- Search (hidden on small screens by CSS) -->
        <div class="search-container">
            <app-search (search)="performSearch()"></app-search>
        </div>

        <!-- Hamburger (mobile) -->
        <button class="menu-toggle" (click)="toggleMenu()" [attr.aria-expanded]="isMenuOpen"
            aria-label="Toggle navigation" type="button">
            <span class="hamburger" [class.active]="isMenuOpen"></span>
        </button>

        <!-- Backdrop -->
        <div class="nav-backdrop" [class.active]="isMenuOpen" (click)="closeMenu()" [attr.aria-hidden]="!isMenuOpen">
        </div>

        <!-- Off-canvas / Desktop nav -->
        <nav class="main-nav" [class.active]="isMenuOpen" role="navigation" aria-label="Main Navigation">
            <ul class="nav-list">
                <li class="nav-item" *ngFor="let item of menuItems" (click)="closeMenu()">
                    <a class="nav-link" [routerLink]="item.path" routerLinkActive="active"
                        [routerLinkActiveOptions]="{ exact: item.exact || false }">{{ item.label }}</a>
                </li>

                <li class="nav-item" *ngIf="!isUserLoggedIn" (click)="closeMenu()">
                    <a routerLink="/login" class="nav-link">Sign In</a>
                </li>

                <li class="nav-item user-item" *ngIf="isUserLoggedIn">
                    <button class="nav-link user-profile" (click)="logout()" type="button" aria-label="Logout">
                        <span class="material-icons" aria-hidden="true">account_circle</span>
                        <span class="logout-text">Logout</span>
                    </button>
                </li>
            </ul>
        </nav>

        <!-- header actions -->
        <div class="header-actions">
            <app-theme-toggle></app-theme-toggle>
        </div>
    </div>
</header>